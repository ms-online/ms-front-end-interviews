<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>查找目标元素的开始位置和终止位置——二进制搜索算法</title>
  </head>
  <body>
    <script>
      //解析过程：
      //          mid
      // [1, 3, 3], 5, [5, 5, 8, 9]
      //  L     R       L        R

      const array = [1, 3, 3, 5, 5, 5, 8, 9]
      const targetToFind = 5
      const binarySearch = function (nums, left, right, target) {
        while (left <= right) {
          const mid = Math.floor((left + right) / 2)
          const foundVal = nums[mid]
          if (foundVal === target) {
            return mid
          } else if (foundVal < target) {
            left = mid + 1
          } else {
            right = mid - 1
          }
        }
        return -1
      }

      const searchRange = function (nums, target) {
        if (nums.length < 1) return [-1, -1]

        const firstPos = binarySearch(nums, 0, nums.length - 1, target)

        if (firstPos === -1) return [-1, -1]

        let startPos = firstPos
        let endPos = firstPos
        let tempL, tempR

        //左侧找寻开始位置
        while (startPos !== -1) {
          tempL = startPos
          startPos = binarySearch(nums, 0, startPos - 1, target)
        }
        startPos = tempL

        //右侧找寻终止位置
        while (endPos !== -1) {
          tempR = endPos
          endPos = binarySearch(nums, endPos + 1, nums.length - 1, target)
        }
        endPos = tempR

        return [startPos, endPos]
      }

      console.log(searchRange(array, targetToFind))
      //时间复杂度：log(n)
      //空间复杂度：O(1)
    </script>
  </body>
</html>
