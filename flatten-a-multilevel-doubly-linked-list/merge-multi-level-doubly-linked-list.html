<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>链表——扁平化多级双向链表</title>
  </head>
  <body>
    <script>
      // ---- 解决方案 ----
      //原始链表 ：null <-- 1 <=> 2 <=> 3 <=> 4 <=> 5 <=> 6 --> null
      //                        7 <=> 8 <=> 9     12 <=> 13
      //                              10 <=>11
      var flatten = function (head) {
        if (!head) return head

        let currenNode = head
        while (currenNode !== null) {
          if (currenNode.child === null) {
            //推进
            currentNode = currentNode.next
          } else {
            //合并
            let tail = currenNode.child
            while (tail.next !== null) {
              tail = tail.next
            }

            //指针的更新
            tail.next = currentNode.next // 9 -> 3
            if (tail.next !== null) {
              tail.next.prev = tail // 3 -> 9
            }

            currentNode.next = currenNode.child //2 -> 7
            currenNode.next.prev = currenNode // 7 -> 2
            currentNode.child = null
          }
        }
        return head
      }

      //时间复杂度：O(n)
      //空间复杂度：O(1)
    </script>
  </body>
</html>
